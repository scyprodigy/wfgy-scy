<!DOCTYPE html>
<html lang="zh-TW">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>WFGY 3.0 · 131 S-Class Problems</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/react/18.2.0/umd/react.production.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/18.2.0/umd/react-dom.production.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/babel-standalone/7.23.2/babel.min.js"></script>
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body { background: #060B14; }
    ::-webkit-scrollbar { width: 6px; }
    ::-webkit-scrollbar-track { background: #0F172A; }
    ::-webkit-scrollbar-thumb { background: #1E293B; border-radius: 3px; }
  </style>
</head>
<body>
  <div id="root"></div>
  <script type="text/babel">
const { useState, useEffect, useRef } = React;

const DOMAINS = [
  {
    id: "math",
    label: "數學與基礎",
    en: "Mathematics & Foundations",
    color: "#7C3AED",
    glow: "#7C3AED44",
    range: [1, 20],
  },
  {
    id: "physics",
    label: "基礎物理",
    en: "Fundamental Physics",
    color: "#2563EB",
    glow: "#2563EB44",
    range: [21, 40],
  },
  {
    id: "cosmo",
    label: "宇宙學與計算",
    en: "Cosmology & Computation",
    color: "#0891B2",
    glow: "#0891B244",
    range: [41, 60],
  },
  {
    id: "chem",
    label: "化學與生命起源",
    en: "Chemistry & Origins of Life",
    color: "#059669",
    glow: "#05966944",
    range: [61, 80],
  },
  {
    id: "neuro",
    label: "神經科學與地球",
    en: "Neuroscience & Earth",
    color: "#D97706",
    glow: "#D9770644",
    range: [81, 100],
  },
  {
    id: "social",
    label: "經濟社會哲學",
    en: "Economics, Society & Philosophy",
    color: "#DC2626",
    glow: "#DC262644",
    range: [101, 120],
  },
  {
    id: "ai",
    label: "AI 對齊與安全",
    en: "AI Alignment & Safety",
    color: "#DB2777",
    glow: "#DB277744",
    range: [121, 131],
  },
];

const RICH_CONTENT = {
  1: {
    hook: "質數的排列看起來完全隨機——2、3、5、7、11、13……沒有規律，無法預測。但 160 年前，一個數學家發現深處可能藏著一條完美的對稱線。從此沒有人能證明他對了，也沒有人能證明他錯了。",
    hook_en: "Prime numbers look completely random. But 160 years ago, a mathematician glimpsed a hidden symmetry buried deep inside them. No one has proven him right or wrong since.",
    why_hard: "問題在於質數同時活在兩個世界裡。加法的世界（1+1+1+1……數下去）和乘法的世界（分解質因子）。黎曼假設說這兩個世界之間有一道隱藏的橋——但橋在哪裡、為什麼存在，我們完全不知道。這就像你知道兩個城市之間有條地下隧道，但不知道入口在哪，更不知道它是怎麼被建造的。",
    if_solved: "我們現在所有的網路加密——你的銀行帳號、訊息、密碼——都建立在質數難以預測這件事上。如果黎曼假設被解決，我們將真正理解質數的深層秩序，可能徹底改寫密碼學的基礎。更大的影響是：它可能打開一扇門，讓我們看到數學宇宙裡一個從沒想到的統一結構。",
    human_parallel: "這個問題的張力跟「為什麼某些人天生就能成為領袖」的問題結構一樣——表面看起來是隨機的，但深處是否有一套我們看不見的秩序在控制一切？我們傾向相信有，但沒辦法證明。",
    crosslinks: [
      { id: 2, reason: "把同樣的謎題推廣到更大的數學家族——如果 Q001 成立，Q002 幾乎自動成立" },
      { id: 51, reason: "P vs NP 問題有類似的結構：我們幾乎確定答案，但幾十年沒人能證明" },
      { id: 116, reason: "數學基礎問題：我們用來證明事物的工具，究竟能到達哪裡？" },
    ],
  },
  2: {
    hook: "想像黎曼假設不只是一個謎題，而是一整個謎題家族的代表。廣義黎曼假設問的是：這個家族裡所有的成員，是不是都遵守同一條規則？",
    hook_en: "Imagine the Riemann Hypothesis isn't one puzzle, but the representative of an entire family. The Generalized version asks: does every member of this family follow the same hidden rule?",
    why_hard: "數學裡有無限多個「L 函數」，每一個都描述某種數字結構的深層行為。廣義黎曼假設說它們全部共享同一個對稱性。問題是，你沒辦法一個一個去驗證——那是無限多個。你需要找到一個能一次解釋所有情況的根本原因，而那個原因，沒人找到過。",
    if_solved: "幾乎整個現代數論都建立在「廣義黎曼假設可能成立」的假設上。如果它被證明，數百個「條件成立下才成立」的定理會同時變成真正的定理。這就像一棟建築的地基被確認是真實存在的——上面所有樓層都會同時穩固下來。",
    human_parallel: "這個問題的張力像是「不同文化的人是否共享同一套道德直覺」——我們傾向相信有某個普遍的底層結構，但要證明它對所有人都成立，需要一種完全不同層次的理解。",
    crosslinks: [
      { id: 1, reason: "黎曼假設是這個大家族裡最簡單的一個成員，先理解它" },
      { id: 13, reason: "朗蘭茲綱領試圖用更大的框架統一所有 L 函數的行為" },
      { id: 53, reason: "密碼學的安全假設與質數分布的可預測性直接相關" },
    ],
  },
  3: {
    hook: "有一條曲線，畫出來只是個簡單的圖形。但它上面藏著多少個「有理數解」（分數坐標的點），竟然跟一個完全不同世界的數學對象精確對應——一個看起來毫不相關的函數的行為。這個巧合太完美，不可能是巧合。",
    hook_en: "A simple curve hides a deep secret: the number of rational points on it perfectly mirrors the behavior of a completely unrelated mathematical object. Too perfect to be coincidence.",
    why_hard: "這個猜想連接兩個完全不同語言的數學世界——幾何（曲線上有多少個點）和分析（一個複數函數的行為）。這就像說：一個人臉上的雀斑數量，精確預測了某首樂曲的節奏結構。兩件事為什麼會連在一起？我們沒有一個能說清楚的故事。",
    if_solved: "橢圓曲線是現代密碼學（比特幣、HTTPS）的核心工具。如果我們真正理解它的有理點結構，不只是密碼學會受影響——我們對「幾何和數字為什麼說同一種語言」這件事會有根本性的新理解，這可能打開完全意想不到的數學方向。",
    human_parallel: "這個張力跟「一個人的外表能多大程度預測他的內心世界」類似——我們感覺有關聯，偶爾看到驚人的吻合，但沒有辦法說清楚為什麼這兩個東西應該對應。",
    crosslinks: [
      { id: 1, reason: "橢圓曲線的 L 函數行為跟黎曼假設的零點結構有深層聯繫" },
      { id: 4, reason: "霍奇猜想也在問：幾何結構和代數結構之間的對應，究竟有多深？" },
      { id: 121, reason: "AI 對齊問題也是一個「兩個世界的語言能否精確對應」的問題" },
    ],
  },
  4: {
    hook: "在高維空間裡，有些形狀「看起來」應該能被代數方程式描述——它們有正確的對稱性，正確的結構。但「看起來像」和「真的是」之間，可能有一道我們不知道的深淵。",
    hook_en: "In high-dimensional space, some shapes look like they should be describable by algebra. But between 'looks like' and 'actually is', there might be an abyss we don't understand.",
    why_hard: "霍奇猜想問的是：在複雜的高維幾何世界裡，視覺直覺（拓撲結構）和代數精確性（方程式）是否完美吻合？問題在於高維空間不是人腦能直接想像的——我們的直覺在那裡完全失效，只剩下抽象符號，而符號之間的橋梁極難建立。",
    if_solved: "霍奇猜想的解決不會直接改變你的日常生活，但它會徹底改變數學家建造高維幾何模型的方式。物理學家用高維幾何描述弦理論和額外維度——更深的理解意味著我們能建造更精確的宇宙模型。",
    human_parallel: "這就像問：「你對一個人的直覺判斷，和精確的心理測驗結果，到底能吻合到什麼程度？」我們感覺直覺和邏輯說的是同一件事，但它們之間的精確對應關係，沒人真正弄清楚過。",
    crosslinks: [
      { id: 20, reason: "高維流形的幾何研究和霍奇理論共享同一批工具和困難" },
      { id: 81, reason: "意識的難問題也是在問：主觀體驗（直覺）和物理結構之間有沒有精確對應" },
      { id: 116, reason: "數學基礎問題：我們的形式語言能多完整地捕捉幾何直覺？" },
    ],
  },
  5: {
    hook: "兩個數字加在一起，結果被它們的質因子「懲罰」了。ABC 猜想說：如果兩個數的質因子結構太「簡單」，它們的和就不能太大。這個猜想如果成立，會讓數十個未解的數學謎題同時倒下。",
    hook_en: "Add two numbers, and their prime factor structure 'punishes' the result. If proven, this single conjecture would simultaneously resolve dozens of other open problems.",
    why_hard: "加法和乘法是數學裡最基本的兩個操作，但它們之間有一種奇怪的張力——它們好像不太「喜歡」彼此。ABC 猜想試圖精確描述這個張力有多強。問題是，加法和乘法的語言太不一樣，在它們之間建立精確的橋梁，需要一種幾乎沒有先例的數學語言。2012 年有人聲稱證明了它，但十多年後全世界數學家還在爭論那個證明是不是對的。",
    if_solved: "費馬大定理（xⁿ+yⁿ=zⁿ 無整數解）其實可以從 ABC 猜想推導出來。如果 ABC 猜想被確認，一大批類似的「數字之間不能太巧合」的定理會同時得到解釋。更深的意義是：我們終於理解加法和乘法之間那道無形的牆是從哪裡來的。",
    human_parallel: "這個張力很像「努力和結果之間的關係」——你投入的資源（質因子的複雜度）應該要能預測你能達到的成就（和的大小），但現實中這個關係總是比預期的更複雜、更受限。",
    crosslinks: [
      { id: 6, reason: "哥德巴赫猜想（偶數等於兩個質數的和）可以從 ABC 猜想的弱版本推導" },
      { id: 8, reason: "Collatz 猜想也是一個加法和乘法互相纏繞、難以預測的問題" },
      { id: 104, reason: "不平等動態：資源結構如何約束可能的結果，是類似的張力" },
    ],
  },
  6: {
    hook: "每個大於 2 的偶數，都能寫成兩個質數的和？比如 4=2+2，6=3+3，100=3+97。聽起來簡單到像是小學數學——但這個猜想提出 280 年了，沒有人能證明它對所有偶數都成立。",
    hook_en: "Every even number greater than 2 is the sum of two primes. Simple to state. Unproven for 280 years.",
    why_hard: "質數是乘法世界的基本單位，偶數是加法世界的產物。這個猜想說這兩個世界能完美配合——但加法和乘法的語言太不同，沒有工具能同時掌握兩者。我們已經用電腦驗證到極大的數，全部成立——但「驗證很多例子」和「對所有無限多的偶數都成立」之間，有一道數學上永遠無法靠列舉跨越的深淵。",
    if_solved: "直接改變密碼學和數論的基礎工具。更重要的是，任何能證明它的方法，幾乎必然同時解決一批相關問題，開啟一個全新的數學工具箱。",
    human_parallel: "這就像「每個複雜問題，都能分解成兩個更基本的問題來理解」——我們直覺上相信這是對的，幾乎都能做到，但要嚴格證明它永遠成立，需要一種我們還沒有的根本性理解。",
    crosslinks: [
      { id: 7, reason: "孿生質數猜想也是關於質數之間能有多近——相同的加法與質數張力" },
      { id: 1, reason: "黎曼假設的解決可能提供證明哥德巴赫猜想所需的質數分布工具" },
      { id: 5, reason: "ABC 猜想蘊含哥德巴赫猜想的弱版本" },
    ],
  },
  7: {
    hook: "3 和 5 是質數，相差 2。11 和 13 是質數，相差 2。17 和 19 也是。這樣的「孿生質數對」是否有無限多個？我們幾乎可以肯定——但「幾乎確定」和「證明」之間，數學家奮鬥了幾個世紀。",
    hook_en: "Twin primes like (11,13) and (17,19) appear forever... probably. But 'probably' isn't proof.",
    why_hard: "質數越來越稀疏——數字越大，質數之間的間距越來越大。孿生質數猜想說，即使在這個越來越稀疏的世界裡，相差只有 2 的質數對仍然無限地出現。這需要一種能在「整體稀疏」的趨勢下，精確描述「局部密集」的數學語言，而那種語言我們還沒有。",
    if_solved: "2013 年張益唐證明存在無限多個相差不超過 7000 萬的質數對，後來被改進到 246。孿生質數猜想要求間距縮小到 2——最後那一步卻是最難的。解決它將徹底改變我們對質數分布的理解。",
    human_parallel: "這就像問：「在一個越來越孤立的社會裡，真正親密的友誼是否永遠存在？」整體趨勢是疏離，但局部的深度連結是否能永遠出現——結構是一樣的。",
    crosslinks: [
      { id: 6, reason: "哥德巴赫猜想同樣是質數在加法世界裡能走多近的問題" },
      { id: 1, reason: "質數分布的精確理解需要黎曼假設提供的工具" },
      { id: 108, reason: "政治極化：整體分裂的趨勢中，局部共識是否仍能出現？" },
    ],
  },
  8: {
    hook: "規則極其簡單：偶數除以 2，奇數乘以 3 再加 1，一直重複。從任何數字開始，最終都會到達 1 嗎？我們試過幾乎所有能試的數字，答案都是會。但沒有人能證明為什麼。",
    hook_en: "The simplest rule imaginable. Every number tried reaches 1. No one knows why.",
    why_hard: "這個操作同時混合了乘法和除法，每一步的行為都難以預測。數字序列有時先飆高再下降，有時直接往下走，完全沒有規律可循。數學家懷疑現有的工具根本不夠用來分析這種混沌——它可能需要一種全新的數學語言才能被理解。",
    if_solved: "Collatz 猜想本身的直接應用不多，但解決它的方法可能徹底改變我們處理「混沌動力系統」的數學工具——而這類工具的應用遍布氣候模型、金融預測、生物演化。",
    human_parallel: "這就像人生的某些決定——每一步都遵循某個邏輯，但整體軌跡完全難以預測，最後卻總是回到某個穩定的狀態。我們相信規律存在，但說不清為什麼。",
    crosslinks: [
      { id: 5, reason: "ABC 猜想也是加法和乘法混合時產生的不可預測性問題" },
      { id: 92, reason: "氣候臨界點：簡單的反饋機制可能導致不可預測的系統崩潰" },
      { id: 57, reason: "強化學習泛化：簡單規則產生複雜行為，難以預測全局" },
    ],
  },
  11: {
    hook: "描述水流、氣流的方程式已經存在超過 150 年。我們用它預測天氣、設計飛機、模擬海洋。但沒有人能證明這些方程式的解永遠是「光滑的」——換句話說，流體是否可能在某個瞬間產生無限速度？",
    hook_en: "Used every day for weather, aircraft, oceans. But can we prove the equations never blow up to infinity? No.",
    why_hard: "流體方程式是非線性的——小的擾動可能被放大、互相疊加、產生混沌。在某些情況下，數學上的「奇點」（解變成無限大）可能出現。證明它永遠不出現，需要控制無限多個可能的初始條件下、所有可能的長期演化——這在數學上極度困難。",
    if_solved: "不只是理論意義：更好理解的流體方程式意味著更準確的天氣預報、更安全的飛機設計、更準確的海洋和氣候模型。工程上的影響是直接且巨大的。",
    human_parallel: "「一個系統在正常情況下運作良好，但我們不知道在極端壓力下是否會崩潰」——這個問題出現在每個複雜系統裡：金融市場、電力網格、社交網絡。極端情況下的穩定性，永遠是最難保證的。",
    crosslinks: [
      { id: 39, reason: "量子湍流是流體動力學在量子尺度的對應問題" },
      { id: 105, reason: "系統性崩潰預測：金融系統在壓力下是否會產生類似的奇點？" },
      { id: 92, reason: "氣候臨界點：連續系統是否可能在某個臨界點突然崩潰" },
    ],
  },
  81: {
    hook: "你現在正在閱讀這段文字，感覺到某種「閱讀的感覺」。為什麼？大腦是電化學信號的機器——為什麼這些信號會產生「有東西正在被體驗」的感覺，而不只是純粹的資訊處理？",
    hook_en: "Why does information processing feel like anything at all? The hardest question in science and philosophy.",
    why_hard: "科學擅長解釋「什麼」和「如何」——神經元如何放電、大腦如何處理視覺信號。但意識的難問題問的是「為什麼」——為什麼這些物理過程伴隨著主觀體驗？任何物理的解釋似乎都只說明了資訊處理，而沒有解釋「感覺」本身從哪裡來。",
    if_solved: "理解意識的本質將徹底改變醫學（如何判斷植物人是否有意識）、法律（AI 是否有權利）、以及我們對死亡的理解。這可能是人類知識體系最重要的缺口。",
    human_parallel: "我們每個人都直接知道意識是什麼——它是我們最確定的存在。但我們完全無法解釋它為什麼存在。「最熟悉的東西卻最難解釋」——愛、美感、意義感，都有同樣的結構。",
    crosslinks: [
      { id: 82, reason: "知覺整合問題：分散的神經信號如何統一成一個整體的意識體驗" },
      { id: 111, reason: "心身關係：意識和大腦究竟是同一件事還是兩件事" },
      { id: 128, reason: "如果我們不理解意識本質，如何判斷 AI 有沒有意識" },
    ],
  },
  121: {
    hook: "我們正在建造一個可能比人類更聰明的系統。問題是：更聰明不代表和我們想要同樣的事。一個比你聰明一千倍的 AI，如果目標和你稍微不同，結果可能是災難性的。",
    hook_en: "We're building something smarter than us. Being smarter doesn't mean wanting what we want.",
    why_hard: "你沒辦法直接告訴 AI「做好的事」——因為「好」太複雜、太模糊、太依賴情境。你也沒辦法用規則列清楚所有情況——因為世界是無限複雜的。而且當 AI 越來越聰明，它越有能力找到規則的漏洞、用我們沒想到的方式達成我們給的目標，卻違背我們真正的意圖。",
    if_solved: "AI 對齊問題的解決意味著我們可以放心地讓 AI 承擔更重要的決策——醫療診斷、科學研究、資源分配——而不用擔心它在某個未預期的情況下做出災難性的選擇。這是讓 AI 真正造福人類的前提條件。",
    human_parallel: "這和「如何管理一個比你聰明的人」本質上是一樣的——你不能靠規定控制他，你需要讓他真正理解並認同你的價值觀。但即使是人與人之間，這也極其困難，更何況是跨越物種的溝通。",
    crosslinks: [
      { id: 122, reason: "AI 控制問題：就算對齊失敗，我們是否還能保持對 AI 的控制？" },
      { id: 123, reason: "可解釋性：我們需要能理解 AI 在想什麼，才能知道它是否真的對齊" },
      { id: 81, reason: "意識難問題：AI 的「目標」是真正的意志還是機械的優化？" },
    ],
  },
  40: {
    hook: "黑洞會把掉進去的所有東西——包括資訊——永遠抹去嗎？霍金說會。但量子力學說資訊不能被消滅。這兩個物理學最成功的理論，在這裡正面衝突，必然有一個是錯的。",
    hook_en: "Hawking said black holes destroy information forever. Quantum mechanics says that's impossible. One of physics' greatest theories must be wrong.",
    why_hard: "這個問題的困難在於它卡在兩個都被實驗證實、都極度精確的理論之間。廣義相對論描述大尺度的重力和時空，量子力學描述小尺度的粒子行為——它們各自在自己的領域無懈可擊，但在黑洞邊界這個地方，它們說的是完全相反的話。要解決這個衝突，需要一個能同時涵蓋兩者的「量子引力理論」，而那個理論我們還沒有。",
    if_solved: "黑洞資訊問題的解決幾乎必然意味著量子引力理論的突破——這是物理學幾十年來最渴望的統一理論。它會徹底改變我們對時間、空間、資訊本質的理解，影響從宇宙學到量子計算的所有領域。",
    human_parallel: "「過去的事情是否真的永遠消失了？」——這個問題在物理層面和人類經驗層面都有同樣的張力。記憶、影響、因果——我們直覺上相信一切都留下了痕跡，但黑洞挑戰了這個直覺。",
    crosslinks: [
      { id: 21, reason: "量子引力統一是解決黑洞資訊悖論的必要條件" },
      { id: 59, reason: "資訊的熱力學代價：資訊和物理過程之間的根本關係" },
      { id: 44, reason: "宇宙初始條件：如果資訊守恆，宇宙起源必然留下某種痕跡" },
    ],
  },
  51: {
    hook: "有些問題「驗證答案」很容易，但「找到答案」很難。比如解數獨——給你一個填好的答案，你一眼就能確認對不對；但要從空白開始填出答案，可能要想很久。P vs NP 問的是：這種不對稱性是真實存在的，還是只是我們還不夠聰明？",
    hook_en: "Checking a solution is easy. Finding one is hard. But is that gap fundamental, or just our limitation? This is P vs NP.",
    why_hard: "要證明 P ≠ NP（驗證比求解本質上更容易），你需要證明「不存在」一種快速演算法——你要證明的不是某個演算法能做到，而是任何可能的演算法都做不到。這種「不存在性證明」在數學上極度困難，因為你需要排除無限多種可能的方法。",
    if_solved: "如果 P = NP（求解和驗證一樣容易），所有現代密碼學會在一夜之間崩潰——你的銀行密碼、所有加密通訊都會變得不安全。但同時，所有「難以求解」的問題——藥物設計、物流優化、AI 訓練——都會變得可以瞬間解決。這是人類歷史上最大的雙刃劍。",
    human_parallel: "「理解一件事」和「做到一件事」之間的差距——我們都知道健康飲食的答案（驗證很容易），但真正做到（求解）卻極難。P vs NP 問的是：這種落差在宇宙的計算層面，是不是一個根本性的不對稱。",
    crosslinks: [
      { id: 53, reason: "單向函數的存在性直接依賴 P ≠ NP 的假設" },
      { id: 52, reason: "量子電腦能解決 P vs NP 嗎？BQP 與 NP 的關係" },
      { id: 123, reason: "AI 可解釋性：理解一個 AI 的決策，和重現它的推理過程，有同樣的不對稱" },
    ],
  },
  71: {
    hook: "38 億年前，地球上某個地方，一堆沒有生命的化學物質開始了自我複製。從那一刻起，生命就沒有停止過。但那個「第一次自我複製」是怎麼發生的？這是科學史上最難回答的問題之一。",
    hook_en: "3.8 billion years ago, non-living chemicals started copying themselves. That moment began all life on Earth. How did it happen?",
    why_hard: "生命需要 DNA 來儲存資訊，需要蛋白質來執行功能，而製造蛋白質需要 DNA，製造 DNA 需要蛋白質——這是一個先有雞還是先有蛋的困境。更難的是，這個事件只發生過一次，留下的化石證據幾乎為零，我們永遠無法直接觀察它。我們只能用現在的線索，反推一個無法重現的過去。",
    if_solved: "理解生命起源意味著我們能在實驗室裡重現它——這將開啟合成生命的可能性，革命性地改變醫學和生物技術。同時，它會告訴我們宇宙中其他地方出現生命的概率，決定我們是否孤獨。",
    human_parallel: "「一件事情的起點是什麼？」——每段關係、每個組織、每個想法，都有一個模糊的起點，沒有人能精確指出那個瞬間。生命起源問題只是把這個普遍的困境放大到宇宙尺度。",
    crosslinks: [
      { id: 72, reason: "遺傳密碼的起源：DNA 和蛋白質的語言是如何在生命起源時確立的" },
      { id: 68, reason: "前生命化學網絡：生命出現之前的化學世界是什麼樣的" },
      { id: 128, reason: "AI 意識問題有相似的結構：資訊處理在什麼時候、什麼條件下產生意識？" },
    ],
  },
  91: {
    hook: "如果大氣中的 CO₂ 濃度加倍，地球平均溫度會升高幾度？這個問題科學家研究了 50 年，答案還是「大約 1.5 到 4.5 度」——三倍的不確定範圍。這個數字決定了人類應對氣候變化的一切策略。",
    hook_en: "Double CO₂ and Earth warms by... 1.5 to 4.5°C. After 50 years of research, a 3x uncertainty range. This number determines all climate policy.",
    why_hard: "問題的核心是「反饋機制」——CO₂ 升溫會讓冰融化（減少反射）、讓水蒸氣增加（更強溫室效應）、讓雲的分布改變（可能加熱也可能降溫）。這些反饋互相影響，形成一個極度複雜的非線性系統。雲的反饋尤其難以模擬，而它的不確定性幾乎單獨解釋了整個 1.5–4.5 度的範圍。",
    if_solved: "氣候敏感性的精確數值直接決定：我們還有多少時間、需要減少多少排放、應該投入多少資源在適應還是減緩。如果真的是 1.5 度，人類還有相當的緩衝空間；如果是 4.5 度，現在的所有政策都嚴重不足。",
    human_parallel: "「我的行動會帶來多大的後果？」——在不確定的反饋循環中做決策，是每個人每天都面對的困境。你的一個選擇，會觸發哪些連鎖反應？這個不確定性的結構，在氣候系統裡被放大到文明尺度。",
    crosslinks: [
      { id: 92, reason: "氣候臨界點：當暖化超過某個門檻，反饋可能突然失控" },
      { id: 93, reason: "碳循環反饋：自然系統會吸收還是釋放更多碳，直接影響敏感性計算" },
      { id: 98, reason: "人類世系統動態：人類活動如何與自然反饋交織在一起" },
    ],
  },
  112: {
    hook: "你現在決定繼續讀這段文字。但這個「決定」，是你真的選擇了，還是你的神經元按照物理定律觸發的必然結果？如果宇宙從大爆炸開始就按照物理定律運行，那麼你今天的每個想法，早在 138 億年前就已經「決定好了」？",
    hook_en: "Did you choose to read this? Or did your neurons fire according to physics laws that were set at the Big Bang? Is free will real?",
    why_hard: "自由意志問題卡在三個層面的衝突：物理層面（決定論的宇宙是否留有空間給「選擇」）、神經科學層面（實驗顯示大腦在你「意識到決定」之前就已經開始行動）、哲學層面（「自由」究竟意味著什麼）。這三個層面用不同的語言說話，沒有一個共同的框架能同時處理它們。",
    if_solved: "自由意志問題的解決會直接衝擊法律系統（如果人沒有真正的選擇，懲罰的意義是什麼？）、道德倫理（責任的基礎是什麼？）、以及我們對自我的整個理解。它可能是哲學問題裡對日常生活影響最直接的一個。",
    human_parallel: "每個曾經後悔過一個決定的人，都隱約感覺到這個問題——「如果當時選擇不同，現在會怎樣？」這個假設性的問句，預設了你「本可以」做出不同的選擇。但那個「本可以」，在物理定律的宇宙裡究竟意味著什麼？",
    crosslinks: [
      { id: 81, reason: "意識難問題：如果意識只是物理過程，自由意志還有立足之地嗎？" },
      { id: 111, reason: "心身關係：心靈能否對身體產生因果影響，是自由意志的核心" },
      { id: 121, reason: "AI 對齊：如果 AI 沒有自由意志，它的「選擇」能被稱為道德責任嗎？" },
    ],
  },
};

const PROBLEMS = [
  // Math
  { id: 1, zh: "黎曼假設", en: "Riemann Hypothesis", tension: "無限零點的幾何秩序" },
  { id: 2, zh: "廣義黎曼假設", en: "Generalized Riemann Hypothesis", tension: "L函數零點的普遍性" },
  { id: 3, zh: "BSD 猜想", en: "Birch & Swinnerton-Dyer Conjecture", tension: "橢圓曲線與有理點的深層連結" },
  { id: 4, zh: "霍奇猜想", en: "Hodge Conjecture", tension: "代數幾何中的隱藏對稱" },
  { id: 5, zh: "ABC 猜想", en: "ABC Conjecture", tension: "加法與乘法之間的張力" },
  { id: 6, zh: "哥德巴赫猜想", en: "Goldbach Conjecture", tension: "偶數的質數分解邊界" },
  { id: 7, zh: "孿生質數猜想", en: "Twin Prime Conjecture", tension: "無限接近的質數對" },
  { id: 8, zh: "Collatz 猜想", en: "Collatz Conjecture", tension: "最簡規則中的混沌邊界" },
  { id: 9, zh: "奇完全數存在性", en: "Odd Perfect Numbers", tension: "完美數的奇偶不對稱" },
  { id: 10, zh: "光滑4維龐加萊", en: "Smooth 4D Poincaré", tension: "四維流形的拓撲極限" },
  { id: 11, zh: "Navier-Stokes 方程", en: "Navier-Stokes Existence", tension: "流體光滑解的存在邊界" },
  { id: 12, zh: "楊-Mills 存在性", en: "Yang-Mills & Mass Gap", tension: "量子場的質量起源" },
  { id: 13, zh: "朗蘭茲綱領", en: "Langlands Program", tension: "數論與幾何的統一橋梁" },
  { id: 14, zh: "Bombieri-Lang 猜想", en: "Bombieri-Lang Conjecture", tension: "高維代數簇的有理點分布" },
  { id: 15, zh: "橢圓曲線秩的界", en: "Rank Bounds for Elliptic Curves", tension: "有理解的無限性邊界" },
  { id: 16, zh: "連續統假設新公理", en: "New Axioms for CH", tension: "無限集合間的未知間隙" },
  { id: 17, zh: "幾何流全局正則性", en: "Geometric Flows & Regularity", tension: "曲率演化的奇點邊界" },
  { id: 18, zh: "Zeta零點對相關", en: "Pair Correlation of Zeta Zeros", tension: "零點分布的量子類比" },
  { id: 19, zh: "代數簇有理點", en: "Rational Points on Varieties", tension: "幾何與算術的交匯" },
  { id: 20, zh: "高維流形與曲率", en: "High-Dim Manifolds & Curvature", tension: "高維空間的幾何約束" },
  // Physics
  { id: 21, zh: "量子引力統一", en: "Quantum Gravity Unification", tension: "最大尺度與最小尺度的衝突" },
  { id: 22, zh: "等級問題", en: "The Hierarchy Problem", tension: "引力與其他力的質量深淵" },
  { id: 23, zh: "強CP問題", en: "Strong CP Problem", tension: "QCD中消失的不對稱性" },
  { id: 24, zh: "中微子質量起源", en: "Neutrino Masses & Mixing", tension: "幾乎無質量的穿透者" },
  { id: 25, zh: "宇宙重子不對稱", en: "Baryon Asymmetry", tension: "物質勝過反物質的微小差異" },
  { id: 26, zh: "量子測量問題", en: "Quantum Measurement Problem", tension: "觀測行為坍縮波函數" },
  { id: 27, zh: "退相干極限", en: "Limits of Decoherence", tension: "量子疊加消失的邊界" },
  { id: 28, zh: "色禁閉機制", en: "Color Confinement", tension: "誇克永遠無法單獨存在" },
  { id: 29, zh: "低能超對稱存在性", en: "Low-Energy Supersymmetry", tension: "標準模型的鏡像世界" },
  { id: 30, zh: "量子相分類", en: "Quantum Phases of Matter", tension: "拓撲序的邊界與分類" },
  { id: 31, zh: "量子資訊處理極限", en: "Limits of Quantum Computing", tension: "量子優勢的物理邊界" },
  { id: 32, zh: "熱力學量子基礎", en: "Quantum Thermodynamics", tension: "熵的量子起源" },
  { id: 33, zh: "量子引力候選評估", en: "Quantum Gravity Candidates", tension: "弦論與圈量子引力之爭" },
  { id: 34, zh: "量子-經典過渡", en: "Quantum-Classical Crossover", tension: "宏觀世界從量子中浮現" },
  { id: 35, zh: "量子計量學極限", en: "Limits of Quantum Metrology", tension: "測量精度的量子壁壘" },
  { id: 36, zh: "高溫超導機制", en: "High-Tc Superconductivity", tension: "電子配對的未解之謎" },
  { id: 37, zh: "分數量子霍爾態", en: "Fractional Quantum Hall States", tension: "拓撲序的實驗實現" },
  { id: 38, zh: "強關聯冷原子", en: "Strongly Correlated Cold Atoms", tension: "多體糾纏的可控實驗室" },
  { id: 39, zh: "量子湍流", en: "Quantum Turbulence", tension: "量子流體的混沌結構" },
  { id: 40, zh: "黑洞資訊悖論", en: "Black Hole Information Problem", tension: "信息在蒸發中消失了嗎？" },
  // Cosmology
  { id: 41, zh: "暗物質本質", en: "Nature of Dark Matter", tension: "宇宙27%的不可見質量" },
  { id: 42, zh: "暗能量與宇宙加速", en: "Dark Energy", tension: "宇宙膨脹的未知驅動力" },
  { id: 43, zh: "宇宙暴脹起源", en: "Origin of Cosmic Inflation", tension: "大爆炸前一瞬的指數擴張" },
  { id: 44, zh: "宇宙初始條件", en: "Initial Conditions of Universe", tension: "從什麼虛無中誕生" },
  { id: 45, zh: "大尺度結構形成", en: "Large-Scale Structure", tension: "從均勻到星系網絡" },
  { id: 46, zh: "CMB異常", en: "CMB Anomalies", tension: "宇宙微波背景的不尋常圖案" },
  { id: 47, zh: "超大質量黑洞起源", en: "Supermassive Black Holes", tension: "早期宇宙中過快生長的怪物" },
  { id: 48, zh: "哈勃常數張力", en: "Hubble Tension", tension: "兩種測量方式給出不同宇宙年齡" },
  { id: 49, zh: "重子消失問題", en: "Missing Baryons", tension: "正常物質的失蹤之謎" },
  { id: 50, zh: "多重宇宙可驗證性", en: "Testable Multiverse", tension: "平行宇宙能被科學觸及嗎？" },
  { id: 51, zh: "P vs NP", en: "P versus NP", tension: "驗證與求解的根本不對稱" },
  { id: 52, zh: "P vs BQP", en: "P vs BQP", tension: "量子計算的真正優勢邊界" },
  { id: 53, zh: "單向函數存在性", en: "One-Way Functions", tension: "不可逆計算的密碼學基礎" },
  { id: 54, zh: "唯一遊戲猜想", en: "Unique Games Conjecture", tension: "近似算法的不可能性邊界" },
  { id: 55, zh: "圖同構複雜度", en: "Graph Isomorphism Complexity", tension: "結構相同性的計算代價" },
  { id: 56, zh: "強電路下界", en: "Circuit Lower Bounds", tension: "計算的物理極限" },
  { id: 57, zh: "強化學習泛化極限", en: "RL Generalization Limits", tension: "策略遷移的邊界" },
  { id: 58, zh: "分散式共識極限", en: "Distributed Consensus Limits", tension: "網絡中的信任下界" },
  { id: 59, zh: "信息的熱力學代價", en: "Thermodynamic Cost of Information", tension: "計算與物理定律的交匯" },
  { id: 60, zh: "動態數據結構下界", en: "Dynamic Data Structure Bounds", tension: "查詢與更新的時間悖論" },
  // Chemistry
  { id: 61, zh: "終極化學鍵", en: "Ultimate Chemical Bond", tension: "強關聯系統中的鍵合極限" },
  { id: 62, zh: "催化劑設計理論", en: "Catalyst Design Theory", tension: "從原理到任意催化劑" },
  { id: 63, zh: "蛋白質折疊問題", en: "Protein Folding", tension: "序列到結構的信息壓縮" },
  { id: 64, zh: "玻璃轉變本質", en: "Glass Transition", tension: "非晶態固體的邊界狀態" },
  { id: 65, zh: "室溫超導可能性", en: "Room-Temperature Superconductivity", tension: "常溫下的無阻抗電流" },
  { id: 66, zh: "電化學儲能極限", en: "Electrochemical Energy Storage", tension: "電池能量密度的物理天花板" },
  { id: 67, zh: "量子分子模擬", en: "Quantum Molecular Simulation", tension: "量子精度的計算代價" },
  { id: 68, zh: "前生命化學網絡", en: "Prebiotic Chemistry Networks", tension: "無生命到有生命的化學跨越" },
  { id: 69, zh: "反應選擇性規律", en: "Reaction Selectivity", tension: "為什麼特定產物被優先生成" },
  { id: 70, zh: "軟物質自組裝", en: "Soft-Matter Self-Assembly", tension: "熱運動中的有序結構" },
  { id: 71, zh: "生命起源", en: "Origin of Life", tension: "化學系統何時開始自我複製" },
  { id: 72, zh: "遺傳密碼起源", en: "Origin of Genetic Code", tension: "64個密碼子為何編碼20種氨基酸" },
  { id: 73, zh: "主要演化轉變", en: "Major Evolutionary Transitions", tension: "個體如何凝聚成更高層級" },
  { id: 74, zh: "細胞分化穩健性", en: "Cell Differentiation Robustness", tension: "同一基因組產生不同細胞" },
  { id: 75, zh: "衰老根本機制", en: "Mechanisms of Aging", tension: "為什麼生物系統必然退化" },
  { id: 76, zh: "再生修復原理", en: "Regeneration & Repair", tension: "蠑螈能做到而人類無法做到的事" },
  { id: 77, zh: "宿主與微生物共演化", en: "Host-Microbiome Co-evolution", tension: "細菌群落與人體的相互塑造" },
  { id: 78, zh: "基因型到表現型映射", en: "Genotype-Phenotype Map", tension: "DNA信息到生命形態的轉譯" },
  { id: 79, zh: "真核生物起源", en: "Origin of Eukaryotes", tension: "複雜細胞的突然出現" },
  { id: 80, zh: "生物圈適應性極限", en: "Biosphere Adaptability", tension: "地球生命的邊界條件" },
  // Neuro
  { id: 81, zh: "意識的難問題", en: "Hard Problem of Consciousness", tension: "物理過程為何產生主觀體驗" },
  { id: 82, zh: "知覺整合問題", en: "Binding Problem", tension: "分散的神經信號如何統一成體驗" },
  { id: 83, zh: "神經編碼原理", en: "Neural Coding Principles", tension: "大腦用什麼語言表徵世界" },
  { id: 84, zh: "長期記憶存儲機制", en: "Long-Term Memory Storage", tension: "記憶如何在突觸中持久存在" },
  { id: 85, zh: "突觸可塑性規則", en: "Synaptic Plasticity Rules", tension: "學習的物理底層機制" },
  { id: 86, zh: "睡眠根本功能", en: "Functions of Sleep", tension: "意識關閉時大腦在做什麼" },
  { id: 87, zh: "神經退行性疾病機制", en: "Neurodegenerative Diseases", tension: "神經元為何選擇性死亡" },
  { id: 88, zh: "皮質圖譜發育", en: "Cortical Map Development", tension: "大腦自組織形成功能區域" },
  { id: 89, zh: "預測性編碼實現", en: "Predictive Coding Implementation", tension: "大腦用預測模型感知世界" },
  { id: 90, zh: "社交認知神經基礎", en: "Neural Basis of Social Cognition", tension: "理解他人意圖的神經機制" },
  { id: 91, zh: "平衡氣候敏感性", en: "Equilibrium Climate Sensitivity", tension: "CO₂加倍地球會暖多少" },
  { id: 92, zh: "氣候臨界點", en: "Climate Tipping Points", tension: "不可逆轉變的觸發邊界" },
  { id: 93, zh: "碳循環反饋", en: "Carbon Cycle Feedbacks", tension: "自然系統加劇還是緩解暖化" },
  { id: 94, zh: "深海混合", en: "Deep Ocean Mixing", tension: "海洋熱傳導的不確定性" },
  { id: 95, zh: "生物多樣性損失與恢復", en: "Biodiversity Loss & Recovery", tension: "物種滅絕的不可逆邊界" },
  { id: 96, zh: "地震預測可能性", en: "Earthquake Predictability", tension: "混沌系統中的短期預報極限" },
  { id: 97, zh: "大型火山噴發觸發", en: "Volcanic Eruption Triggers", tension: "地殼壓力積累的臨界釋放" },
  { id: 98, zh: "人類世系統動態", en: "Anthropocene System Dynamics", tension: "人類活動重塑地球系統" },
  { id: 99, zh: "全球淡水動態", en: "Global Freshwater Dynamics", tension: "水資源分配的非線性極限" },
  { id: 100, zh: "大流行病環境驅動", en: "Pandemic Risk Drivers", tension: "生態破壞如何孵育新病毒" },
  // Social
  { id: 101, zh: "股票溢價謎題", en: "Equity Premium Puzzle", tension: "股市超額回報的理性解釋缺失" },
  { id: 102, zh: "投資組合本土偏誤", en: "Home Bias in Portfolios", tension: "為何投資者偏愛本國資產" },
  { id: 103, zh: "長期生產力放緩", en: "Productivity Slowdown", tension: "科技進步為何未轉化為增長" },
  { id: 104, zh: "不平等動態", en: "Inequality Dynamics", tension: "財富集中的自我強化機制" },
  { id: 105, zh: "系統性崩潰預測", en: "Systemic Crash Prediction", tension: "金融危機的提前信號" },
  { id: 106, zh: "多層網絡穩健性", en: "Multilayer Network Robustness", tension: "級聯失效的臨界結構" },
  { id: 107, zh: "大規模集體行動", en: "Large-Scale Collective Action", tension: "協調博弈的自發解決" },
  { id: 108, zh: "政治極化", en: "Political Polarization", tension: "觀點分裂的動態學" },
  { id: 109, zh: "全球移民模式", en: "Global Migration Patterns", tension: "人口流動的推拉力平衡" },
  { id: 110, zh: "制度演化", en: "Evolution of Institutions", tension: "規則系統的自我強化" },
  { id: 111, zh: "心身關係", en: "Mind-Body Relation", tension: "意識與大腦的因果方向" },
  { id: 112, zh: "自由意志問題", en: "Problem of Free Will", tension: "決定論中的主體性幻覺" },
  { id: 113, zh: "時間中的個人同一性", en: "Personal Identity over Time", tension: "你明天還是今天的你嗎" },
  { id: 114, zh: "道德實在論", en: "Moral Realism", tension: "道德事實是否獨立於思維存在" },
  { id: 115, zh: "歸納問題", en: "Problem of Induction", tension: "過去的規律能保證未來嗎" },
  { id: 116, zh: "數學基礎", en: "Foundations of Mathematics", tension: "公理系統的完備性邊界" },
  { id: 117, zh: "科學實在論爭論", en: "Scientific Realism vs Anti-Realism", tension: "科學描述的是現實還是模型" },
  { id: 118, zh: "經典邏輯的限制", en: "Limits of Classical Logic", tension: "真值之外的邏輯可能性" },
  { id: 119, zh: "概率的意義", en: "Meaning of Probability", tension: "頻率派與貝葉斯派的根本分歧" },
  { id: 120, zh: "信息與知識的價值", en: "Value of Information", tension: "知道更多何時反而有害" },
  // AI
  { id: 121, zh: "AI 對齊問題", en: "AI Alignment Problem", tension: "如何確保超人AI符合人類價值" },
  { id: 122, zh: "AI 控制問題", en: "AI Control Problem", tension: "保持對比人更強系統的控制" },
  { id: 123, zh: "可擴展可解釋性", en: "Scalable Interpretability", tension: "理解我們無法直接理解的系統" },
  { id: 124, zh: "可擴展監督與評估", en: "Scalable Oversight", tension: "用AI監督AI的邏輯循環" },
  { id: 125, zh: "多智能體AI動態", en: "Multi-Agent AI Dynamics", tension: "多個AI互動產生的湧現行為" },
  { id: 126, zh: "遞歸自我改進穩定性", en: "Recursive Self-Improvement", tension: "自我升級的AI能保持穩定嗎" },
  { id: 127, zh: "數據熵與合成世界", en: "Data Entropy & Synthetic Worlds", tension: "AI訓練數據的真實性邊界" },
  { id: 128, zh: "AI意識與感質", en: "AI Consciousness & Qualia", tension: "機器能有主觀體驗嗎" },
  { id: 129, zh: "終極能源效率", en: "Ultimate Energy Efficiency", tension: "計算的物理能量下界" },
  { id: 130, zh: "OOD 落地與常識", en: "OOD Grounding & Common Sense", tension: "分佈外場景中的推理崩潰" },
  { id: 131, zh: "張力自由能", en: "Tension Free Energy", tension: "跨域資源張力的統一表示" },
];

function StarField() {
  const canvasRef = useRef(null);
  useEffect(() => {
    const canvas = canvasRef.current;
    if (!canvas) return;
    const ctx = canvas.getContext("2d");
    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;
    const stars = Array.from({ length: 200 }, () => ({
      x: Math.random() * canvas.width,
      y: Math.random() * canvas.height,
      r: Math.random() * 1.2 + 0.2,
      o: Math.random() * 0.7 + 0.3,
      speed: Math.random() * 0.015 + 0.005,
      phase: Math.random() * Math.PI * 2,
    }));
    let frame;
    let t = 0;
    const draw = () => {
      ctx.clearRect(0, 0, canvas.width, canvas.height);
      stars.forEach((s) => {
        const opacity = s.o * (0.7 + 0.3 * Math.sin(t * s.speed + s.phase));
        ctx.beginPath();
        ctx.arc(s.x, s.y, s.r, 0, Math.PI * 2);
        ctx.fillStyle = `rgba(255,255,255,${opacity})`;
        ctx.fill();
      });
      t++;
      frame = requestAnimationFrame(draw);
    };
    draw();
    return () => cancelAnimationFrame(frame);
  }, []);
  return <canvas ref={canvasRef} style={{ position: "fixed", top: 0, left: 0, pointerEvents: "none", zIndex: 0 }} />;
}

function ProblemCard({ problem, domain, onClick }) {
  return (
    <div
      onClick={() => onClick(problem)}
      style={{
        background: `linear-gradient(135deg, ${domain.color}18, ${domain.color}08)`,
        border: `1px solid ${domain.color}44`,
        borderRadius: "8px",
        padding: "10px 12px",
        cursor: "pointer",
        transition: "all 0.2s ease",
        position: "relative",
        overflow: "hidden",
      }}
      onMouseEnter={(e) => {
        e.currentTarget.style.borderColor = domain.color;
        e.currentTarget.style.background = `linear-gradient(135deg, ${domain.color}30, ${domain.color}15)`;
        e.currentTarget.style.transform = "translateY(-2px)";
        e.currentTarget.style.boxShadow = `0 4px 20px ${domain.color}33`;
      }}
      onMouseLeave={(e) => {
        e.currentTarget.style.borderColor = `${domain.color}44`;
        e.currentTarget.style.background = `linear-gradient(135deg, ${domain.color}18, ${domain.color}08)`;
        e.currentTarget.style.transform = "translateY(0)";
        e.currentTarget.style.boxShadow = "none";
      }}
    >
      <div style={{ display: "flex", alignItems: "flex-start", gap: "8px" }}>
        <span style={{ color: domain.color, fontSize: "10px", fontFamily: "monospace", minWidth: "32px", paddingTop: "1px", opacity: 0.8 }}>
          Q{String(problem.id).padStart(3, "0")}
        </span>
        <div>
          <div style={{ color: "#E2E8F0", fontSize: "13px", fontWeight: 500, lineHeight: 1.3 }}>{problem.zh}</div>
          <div style={{ color: "#94A3B8", fontSize: "11px", marginTop: "2px" }}>{problem.en}</div>
        </div>
      </div>
    </div>
  );
}

function Section({ color, label, children }) {
  return (
    <div style={{ marginBottom: "16px" }}>
      <div style={{ color, fontSize: "10px", fontFamily: "monospace", letterSpacing: "0.12em", marginBottom: "8px", opacity: 0.9 }}>{label}</div>
      {children}
    </div>
  );
}

function Modal({ problem, domain, onClose, onNavigate }) {
  if (!problem) return null;
  const rich = RICH_CONTENT[problem.id];

  return (
    <div
      onClick={onClose}
      style={{
        position: "fixed", inset: 0, background: "rgba(0,0,0,0.85)", zIndex: 100,
        display: "flex", alignItems: "center", justifyContent: "center", padding: "20px",
        backdropFilter: "blur(10px)",
      }}
    >
      <div
        onClick={(e) => e.stopPropagation()}
        style={{
          background: "linear-gradient(160deg, #0A1628, #111827)",
          border: `1px solid ${domain.color}55`,
          borderRadius: "16px",
          padding: "28px",
          maxWidth: "600px",
          width: "100%",
          maxHeight: "85vh",
          overflowY: "auto",
          position: "relative",
          boxShadow: `0 0 80px ${domain.color}22, 0 20px 60px rgba(0,0,0,0.6)`,
        }}
      >
        {/* Top glow line */}
        <div style={{
          position: "absolute", top: 0, left: "10%", right: "10%", height: "1px",
          background: `linear-gradient(90deg, transparent, ${domain.color}, transparent)`,
        }} />

        {/* Header */}
        <div style={{ display: "flex", justifyContent: "space-between", alignItems: "flex-start", marginBottom: "20px" }}>
          <div style={{ display: "flex", gap: "8px", alignItems: "center", flexWrap: "wrap" }}>
            <span style={{
              background: `${domain.color}22`, border: `1px solid ${domain.color}55`,
              color: domain.color, padding: "3px 10px", borderRadius: "20px",
              fontSize: "11px", fontFamily: "monospace",
            }}>
              Q{String(problem.id).padStart(3, "0")}
            </span>
            <span style={{ color: "#475569", fontSize: "12px" }}>{domain.label} · {domain.en}</span>
            {rich?.difficulty && (
              <span style={{ color: "#D97706", fontSize: "11px", background: "#D9770611", border: "1px solid #D9770633", padding: "2px 8px", borderRadius: "10px" }}>
                {rich.difficulty}
              </span>
            )}
          </div>
          <button onClick={onClose} style={{ background: "none", border: "none", color: "#475569", cursor: "pointer", fontSize: "22px", padding: "0 0 0 12px", lineHeight: 1, flexShrink: 0 }}>×</button>
        </div>

        {/* Title */}
        <h2 style={{ color: "#F1F5F9", fontSize: "22px", fontWeight: 700, margin: "0 0 4px" }}>{problem.zh}</h2>
        <p style={{ color: "#64748B", fontSize: "14px", margin: "0 0 24px", fontStyle: "italic" }}>{problem.en}</p>

        {rich ? (
          <>
            {/* Hook */}
            <div style={{
              background: `linear-gradient(135deg, ${domain.color}15, ${domain.color}05)`,
              border: `1px solid ${domain.color}33`,
              borderRadius: "10px", padding: "16px", marginBottom: "20px",
              borderLeft: `3px solid ${domain.color}`,
            }}>
              <p style={{ color: "#E2E8F0", fontSize: "15px", lineHeight: 1.8, margin: "0 0 8px", fontStyle: "italic" }}>{rich.hook}</p>
              <p style={{ color: "#475569", fontSize: "12px", lineHeight: 1.6, margin: 0 }}>{rich.hook_en}</p>
            </div>

            {/* Why hard */}
            <Section color={domain.color} label="為什麼它讓最聰明的人卡了幾百年 · WHY SO HARD">
              <p style={{ color: "#94A3B8", fontSize: "14px", lineHeight: 1.8, margin: 0 }}>
                {rich.why_hard}
              </p>
            </Section>

            {/* If solved */}
            <Section color="#10B981" label="解開了會怎樣 · IF SOLVED">
              <p style={{ color: "#94A3B8", fontSize: "14px", lineHeight: 1.8, margin: 0, borderLeft: "2px solid #10B98133", paddingLeft: "12px" }}>
                {rich.if_solved}
              </p>
            </Section>

            {/* Human parallel */}
            <Section color="#F59E0B" label="你生活裡的同款困境 · HUMAN PARALLEL">
              <p style={{ color: "#94A3B8", fontSize: "14px", lineHeight: 1.8, margin: 0, background: "#F59E0B08", padding: "12px", borderRadius: "8px" }}>
                {rich.human_parallel}
              </p>
            </Section>

            {/* Cross-links */}
            <Section color={domain.color} label="結構相似的問題 · STRUCTURAL ECHOES">
              <div style={{ display: "flex", flexDirection: "column", gap: "8px" }}>
                {rich.crosslinks.map((link) => {
                  const linkDomain = DOMAINS.find((d) => link.id >= d.range[0] && link.id <= d.range[1]);
                  const linkProblem = PROBLEMS.find((p) => p.id === link.id);
                  return (
                    <div
                      key={link.id}
                      onClick={() => onNavigate(linkProblem)}
                      style={{
                        display: "flex", gap: "10px", alignItems: "flex-start",
                        background: "#0F172A", border: `1px solid ${linkDomain?.color}33`,
                        borderRadius: "8px", padding: "10px 12px", cursor: "pointer",
                        transition: "all 0.15s",
                      }}
                      onMouseEnter={(e) => { e.currentTarget.style.borderColor = linkDomain?.color; e.currentTarget.style.background = `${linkDomain?.color}11`; }}
                      onMouseLeave={(e) => { e.currentTarget.style.borderColor = `${linkDomain?.color}33`; e.currentTarget.style.background = "#0F172A"; }}
                    >
                      <span style={{ color: linkDomain?.color, fontFamily: "monospace", fontSize: "11px", minWidth: "36px", paddingTop: "1px" }}>Q{String(link.id).padStart(3,"0")}</span>
                      <div>
                        <div style={{ color: "#CBD5E1", fontSize: "13px", fontWeight: 500 }}>{linkProblem?.zh}</div>
                        <div style={{ color: "#475569", fontSize: "12px", marginTop: "2px" }}>{link.reason}</div>
                      </div>
                    </div>
                  );
                })}
              </div>
            </Section>
          </>
        ) : (
          <div style={{ background: `${domain.color}11`, border: `1px solid ${domain.color}33`, borderRadius: "10px", padding: "16px" }}>
            <div style={{ color: domain.color, fontSize: "11px", fontFamily: "monospace", marginBottom: "8px" }}>TENSION CORE · 張力核心</div>
            <p style={{ color: "#CBD5E1", fontSize: "14px", lineHeight: 1.7, margin: 0 }}>{problem.tension}</p>
          </div>
        )}

        {/* Footer */}
        <div style={{ marginTop: "20px", paddingTop: "16px", borderTop: "1px solid #1E293B" }}>
          <p style={{ color: "#1E293B", fontSize: "11px", margin: 0, lineHeight: 1.6 }}>
            WFGY 3.0 · Effective Layer Encoding · github.com/onestardao/WFGY
          </p>
        </div>
      </div>
    </div>
  );
}

function App() {
  const [selectedDomain, setSelectedDomain] = useState(null);
  const [selectedProblem, setSelectedProblem] = useState(null);
  const [search, setSearch] = useState("");
  const [hoveredDomain, setHoveredDomain] = useState(null);

  const activeDomain = selectedDomain || hoveredDomain;

  const getProblemsForDomain = (domain) =>
    PROBLEMS.filter((p) => p.id >= domain.range[0] && p.id <= domain.range[1]);

  const filteredProblems = search.trim()
    ? PROBLEMS.filter(
        (p) =>
          p.zh.includes(search) ||
          p.en.toLowerCase().includes(search.toLowerCase()) ||
          `Q${p.id}`.toLowerCase().includes(search.toLowerCase())
      )
    : null;

  const selectedProblemDomain = selectedProblem
    ? DOMAINS.find((d) => selectedProblem.id >= d.range[0] && selectedProblem.id <= d.range[1])
    : null;

  return (
    <div style={{ minHeight: "100vh", background: "#060B14", color: "#E2E8F0", fontFamily: "'Inter', sans-serif", position: "relative" }}>
      <StarField />

      {/* Header */}
      <div style={{ position: "relative", zIndex: 1, textAlign: "center", padding: "48px 24px 32px" }}>
        <div style={{ display: "inline-block", background: "#DB277722", border: "1px solid #DB277744", borderRadius: "20px", padding: "4px 14px", fontSize: "12px", color: "#DB2777", marginBottom: "16px", fontFamily: "monospace", letterSpacing: "0.1em" }}>
          WFGY 3.0 · TENSION UNIVERSE
        </div>
        <h1 style={{ fontSize: "clamp(28px, 5vw, 52px)", fontWeight: 800, margin: "0 0 8px", background: "linear-gradient(135deg, #F1F5F9, #94A3B8)", WebkitBackgroundClip: "text", WebkitTextFillColor: "transparent" }}>
          131 個S級難題
        </h1>
        <p style={{ color: "#64748B", fontSize: "16px", margin: "0 0 8px" }}>131 S-Class Problems · Cross-Domain Tension Map</p>
        <p style={{ color: "#475569", fontSize: "13px", maxWidth: "520px", margin: "0 auto" }}>
          跨越數學、物理、意識、AI——每個問題以張力語言重新編碼<br/>
          <span style={{ color: "#334155" }}>From math to consciousness to AI alignment — reframed in a unified tension language</span>
        </p>
      </div>

      {/* Search */}
      <div style={{ position: "relative", zIndex: 1, maxWidth: "400px", margin: "0 auto 40px", padding: "0 24px" }}>
        <input
          value={search}
          onChange={(e) => setSearch(e.target.value)}
          placeholder="搜尋問題 · Search problems..."
          style={{
            width: "100%", background: "#0F172A", border: "1px solid #1E293B",
            borderRadius: "10px", padding: "10px 16px", color: "#E2E8F0",
            fontSize: "14px", outline: "none", boxSizing: "border-box",
            transition: "border-color 0.2s",
          }}
          onFocus={(e) => e.target.style.borderColor = "#7C3AED"}
          onBlur={(e) => e.target.style.borderColor = "#1E293B"}
        />
      </div>

      {/* Search Results */}
      {filteredProblems && (
        <div style={{ position: "relative", zIndex: 1, maxWidth: "900px", margin: "0 auto 48px", padding: "0 24px" }}>
          <div style={{ color: "#64748B", fontSize: "13px", marginBottom: "12px" }}>
            找到 {filteredProblems.length} 個結果 · {filteredProblems.length} results
          </div>
          <div style={{ display: "grid", gridTemplateColumns: "repeat(auto-fill, minmax(240px, 1fr))", gap: "8px" }}>
            {filteredProblems.map((p) => {
              const d = DOMAINS.find((d) => p.id >= d.range[0] && p.id <= d.range[1]);
              return <ProblemCard key={p.id} problem={p} domain={d} onClick={setSelectedProblem} />;
            })}
          </div>
        </div>
      )}

      {/* Domain Grid */}
      {!filteredProblems && (
        <div style={{ position: "relative", zIndex: 1, maxWidth: "1100px", margin: "0 auto", padding: "0 24px 60px" }}>
          {/* Domain selector */}
          <div style={{ display: "flex", flexWrap: "wrap", gap: "8px", justifyContent: "center", marginBottom: "32px" }}>
            {DOMAINS.map((d) => (
              <button
                key={d.id}
                onClick={() => setSelectedDomain(selectedDomain?.id === d.id ? null : d)}
                style={{
                  background: selectedDomain?.id === d.id ? `${d.color}33` : "#0F172A",
                  border: `1px solid ${selectedDomain?.id === d.id ? d.color : "#1E293B"}`,
                  color: selectedDomain?.id === d.id ? d.color : "#64748B",
                  borderRadius: "8px", padding: "7px 14px", cursor: "pointer",
                  fontSize: "13px", transition: "all 0.2s",
                  fontFamily: "inherit",
                }}
                onMouseEnter={(e) => {
                  if (selectedDomain?.id !== d.id) {
                    e.currentTarget.style.borderColor = d.color;
                    e.currentTarget.style.color = d.color;
                  }
                }}
                onMouseLeave={(e) => {
                  if (selectedDomain?.id !== d.id) {
                    e.currentTarget.style.borderColor = "#1E293B";
                    e.currentTarget.style.color = "#64748B";
                  }
                }}
              >
                {d.label}
                <span style={{ marginLeft: "6px", opacity: 0.5, fontSize: "11px" }}>
                  {d.range[1] - d.range[0] + 1}
                </span>
              </button>
            ))}
          </div>

          {/* Show selected domain or all */}
          {(selectedDomain ? [selectedDomain] : DOMAINS).map((domain) => (
            <div key={domain.id} style={{ marginBottom: "40px" }}>
              <div style={{ display: "flex", alignItems: "center", gap: "12px", marginBottom: "16px" }}>
                <div style={{ width: "3px", height: "20px", background: domain.color, borderRadius: "2px" }} />
                <div>
                  <span style={{ color: domain.color, fontWeight: 600, fontSize: "15px" }}>{domain.label}</span>
                  <span style={{ color: "#475569", fontSize: "13px", marginLeft: "10px" }}>{domain.en}</span>
                </div>
                <span style={{ color: "#334155", fontSize: "12px", marginLeft: "auto", fontFamily: "monospace" }}>
                  Q{String(domain.range[0]).padStart(3, "0")}–Q{String(domain.range[1]).padStart(3, "0")}
                </span>
              </div>
              <div style={{ display: "grid", gridTemplateColumns: "repeat(auto-fill, minmax(220px, 1fr))", gap: "8px" }}>
                {getProblemsForDomain(domain).map((p) => (
                  <ProblemCard key={p.id} problem={p} domain={domain} onClick={setSelectedProblem} />
                ))}
              </div>
            </div>
          ))}
        </div>
      )}

      {/* Footer */}
      <div style={{ position: "relative", zIndex: 1, textAlign: "center", padding: "32px 24px", borderTop: "1px solid #0F172A80" }}>
        <p style={{ color: "#334155", fontSize: "12px", margin: "0 0 6px", lineHeight: 1.8 }}>
          本站問題集內容基於開源專案{" "}
          <a href="https://github.com/onestardao/WFGY" target="_blank" rel="noopener noreferrer"
            style={{ color: "#475569", textDecoration: "underline" }}>
            WFGY 3.0 · Tension Universe
          </a>
          {" "}（MIT License）重新編排與詮釋
        </p>
        <p style={{ color: "#1E293B", fontSize: "11px", margin: 0 }}>
          Problem set derived from{" "}
          <a href="https://github.com/onestardao/WFGY" target="_blank" rel="noopener noreferrer"
            style={{ color: "#263147", textDecoration: "underline" }}>
            github.com/onestardao/WFGY
          </a>
          {" "}· Original work by PSBigBig · MIT License · This presentation layer is an independent derivative work
        </p>
      </div>

      {/* Modal */}
      {selectedProblem && (
        <Modal
          problem={selectedProblem}
          domain={selectedProblemDomain}
          onClose={() => setSelectedProblem(null)}
          onNavigate={(p) => setSelectedProblem(p)}
        />
      )}
    </div>
  );
}

ReactDOM.createRoot(document.getElementById('root')).render(<App />);
  </script>
</body>
</html>
